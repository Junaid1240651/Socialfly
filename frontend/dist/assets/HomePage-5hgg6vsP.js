import{j as s,F as n,L as j,B as l,T as g,a as m,r as i,u as p,b as h,c as w,d as u,e as S,S as y,s as b}from"./index-JVrb99rO.js";import{u as U,P as F}from"./useFollowUnfollow-DEf5CV0N.js";import{A as k}from"./chunk-V7PAE35Z-D2UZjn2e.js";import{S as L,a as x}from"./chunk-W7A7QDAK-BBIKUkVy.js";import"./formatDistanceToNow-D_iz8mLG.js";import"./chunk-JQMJHPZH-BRDday_i.js";const P=({user:e})=>{const{handleFollowUnfollow:o,following:a,isLoading:r}=U(e);return s.jsxs(n,{gap:2,justifyContent:"space-between",alignItems:"center",children:[s.jsxs(n,{gap:2,as:j,to:`${e==null?void 0:e.userName}`,children:[s.jsx(k,{src:e==null?void 0:e.profilePic}),s.jsxs(l,{children:[s.jsx(g,{fontSize:"sm",fontWeight:"bold",children:e==null?void 0:e.userName}),s.jsx(g,{color:"gray.light",fontSize:"sm",children:e==null?void 0:e.name})]})]}),s.jsx(m,{size:"sm",color:a?"black":"white",bg:a?"white":"blue.400",onClick:o,isLoading:r,_hover:{color:a?"black":"white",opacity:".8"},children:a?"Unfollow":"Follow"})]})},E=()=>{const[e,o]=i.useState(!0),[a,r]=i.useState([]),c=p(),d=async()=>{o(!0);try{const t=await h.get("/api/users/suggested");r(t.data)}catch(t){c("Error",t.response.error,"error")}finally{o(!1)}};return i.useEffect(()=>{d()},[]),s.jsxs(s.Fragment,{children:[s.jsx(g,{mb:4,fontWeight:"bold",children:"Suggested Users"}),s.jsxs(n,{direction:"column",gap:4,children:[!e&&a.map(t=>s.jsx(P,{user:t},t._id)),e&&[0,1,2,3,4].map((t,f)=>s.jsxs(n,{gap:2,alignItems:"center",p:"1",borderRadius:"md",children:[s.jsx(l,{children:s.jsx(L,{size:"10"})}),s.jsxs(n,{w:"full",flexDirection:"column",gap:2,children:[s.jsx(x,{h:"8px",w:"80px"}),s.jsx(x,{h:"8px",w:"90px"})]}),s.jsx(n,{children:s.jsx(x,{h:"20px",w:"60px"})})]},f))]})]})},v=()=>{const e=p(),{isLoading:o,setLoading:a}=w(),r=u(t=>t.posts.setPosts),c=S(),d=async()=>{if(!o){a(!0);try{const t=await h.get("/api/posts/feed");c(b(t.data))}catch(t){e("Error",t.response.data.error,"error")}finally{a(!1)}}};return i.useEffect(()=>{d()},[]),s.jsxs(n,{gap:"10",alignItems:"flex-start",children:[s.jsxs(l,{flex:70,children:[!o&&r.length===0&&s.jsx("h1",{children:"Follow some users to see the feed"}),o&&s.jsx(n,{justify:"center",children:s.jsx(y,{size:"xl"})}),!o&&r.map(t=>s.jsx(F,{post:t,postedBy:t.postedBy},t._id))]}),s.jsx(l,{flex:30,display:{base:"none",md:"block"},children:s.jsx(E,{})})]})};export{v as default};
